\documentclass[zihao=-4,linespread=1.5,a4paper,heading=true,twoside]{ctexbook}
\pagestyle{empty}
\usepackage{geometry}
\geometry{
	a4paper,
}
\setlength{\headheight}{14.5pt}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{bm}
\usepackage{calrsfs}
\DeclareMathAlphabet{\pazocal}{OMS}{zplm}{m}{n}
\usepackage{stmaryrd}

\usepackage{graphicx}
\graphicspath{ {./img/}{./img/} }
\usepackage{wrapfig}
\usepackage{subcaption}
\usepackage{capt-of}
\usepackage{cutwin}
\usepackage[format=hang]{caption}

\usepackage{booktabs}

\usepackage{hyperref}[colorlinks,linkcolor=blue]
%\hypersetup{hidelinks,
%	colorlinks=true,
%	linkcolor=red,
%	pdfstartview=Fit,
%	breaklinks=true,
%	}
\usepackage{geometry}
\geometry{
a4paper,
total={171.8mm,246.2mm},
left=19.1mm,
top=25.4mm,
}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[LE,RO]{\rightmark}
\fancyhead[LO,RE]{\leftmark}
\fancyfoot{}
\fancyfoot[LE,RO]{\thepage}
\fancyfoot[LO,RE]{更新至\today}

% package for quotes
\usepackage{csquotes}

% redefine itemize
\usepackage{enumitem} % http://ctan.org/pkg/enumitem
\setlist{nosep}

% package for hyperlinks
\usepackage{hyperref}
\hypersetup{colorlinks=true}

% packages for footnotes
% \renewcommand{\thefootnote}{\fnsymbol{footnote}}
% \usepackage{perpage}
% \MakePerPage{footnote} 
\usepackage[perpage,symbol*]{footmisc}

% packages for bibliography
\usepackage[
backend=biber,
style=gb7714-2015,
gbpub=false,
sorting=none
]{biblatex}
\addbibresource{./ref/ref.bib}

\usepackage{listings}
\usepackage{fontspec}
\usepackage{tcolorbox}
\setmonofont{Fira Code} % 设置使用的字体，可以根据情况替换为其他字体名称

\lstset{
    frame=single,
    showspaces=false, % 不显示空格字符
    showstringspaces=false, % 不显示空格字符
    basicstyle=\small\ttfamily,
    numbers=left,
    numberstyle=\small,
    keywordstyle=\color{blue},
    commentstyle=\color{green!50!black}
}

\usepackage{float}
% packages for definitions, theorems, proofs.
\usepackage{amsthm}

% set styles for definitions, lemmata, theorems, proofs, examples
\theoremstyle{definition}
\newtheorem{definition}{定义}
\newtheorem*{definition*}{定义}
\newtheorem{theorem}{定理}
\newtheorem*{theorem*}{定理}
\newtheorem{lemma}{引理}
\newtheorem{corollary}{推论}[theorem]
\let\oldproof\proof
\renewcommand{\proof}{\color{gray}\oldproof}

\theoremstyle{plain}
\newtheorem{example}{例}

% counter controlling
\usepackage{chngcntr}
\counterwithin{figure}{chapter}
\counterwithin{equation}{chapter}
\counterwithin{definition}{chapter}
\counterwithin{theorem}{chapter}
\counterwithin{lemma}{chapter}
\counterwithin{example}{chapter}
%\counterwithin{chapter}{part}
\setcounter{tocdepth}{2}

% package for subfiles
\usepackage{subfiles}

\usepackage{datetime2}

%=====================================================================================================================
\begin{document}
\frontmatter
\pagenumbering{roman}
\section*{前言}\label{sec:preface}
\subfile{preface.tex}

\tableofcontents
\mainmatter
\pagenumbering{arabic}

\part{电机控制}\label{sec:I}

\chapter{PMSM电机控制}
\subfile{Part I/1_经典FOC算法.tex}
\subfile{Part I/2_有感FOC算法代码详解.tex}
\subfile{Part I/3_语言及架构.tex}
\subfile{Part I/4_神奇bug在哪里.tex}

\chapter{控制原理}
\subfile{Part II/1_经典控制原理.tex}
\subfile{Part II/2_现代控制原理.tex}

\newpage\part*{参考文献}
\printbibliography[heading=none]


\end{document}